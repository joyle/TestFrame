# 绩效分析之Brinson模型

在众多的绩效归因方法中，最出名的也许是Brinson分析。我们在这个帖子中将介绍Brinson模型，并使用实例让大家更清晰地明白我们RQBeta中的Brinson分析是如何算出来~   

Brinson和Falcher(1985年)最早对业绩归因进行研究，由他们所创建Brinson模型将业绩归因为四个部分：资产配置、个股选择、交互作用和基准收益。

举一个很简单的例子，假如我们看到一个策略竟然有100%的收益，然而这100%是怎么来的呢？直观又简单的方法就是查看它的绩效分析，就可以看出它的收益的来源，是来自行业配置，还是选的个股表现超凡，更或者是来自大盘的涨跌呢？

## 一、单期Brinson模型

首先，这里单期的意思是指在这段时期没有交易。我们先构建4个组合：

Q1 & Q4：业绩基准收益和实际投资组合；

Q2：主动资产配置组合。这表示此事基金经理能自主选择资产配置的比例，但是每个资产类别内部则完全按照其业绩基准配置，即每个资产i的收益等于在基准中资产i的收益；

Q3：主动股票选择组合。这表示此时基金经理完全按照业绩基准的比例进行资产类别的配置，但是每个资产内部能够自主选择个股，即组合中每个资产i的权重等于基准中资产i的权重。

它们的计算公式如下图，其中wp,i表示组合中资产i的权重；wb,i表示基准中资产i的权重；rp,i表示组合中资产i的收益率；rb,i表示基准中资产i的收益率。一般来说，资产i代表着不同行业。

||组合资产i收益($r_{p,i}$)|基准资产i收益($r_{b,i}$)|
|-|-|-|
|组合资产i权重($w_{p,i}$)|$Q_4=\displaystyle\sum_{i=1}^{n}{w_{p,i}*r_{p,i}}$|$Q_2=\displaystyle\sum_{i=1}^{n}{w_{p,i}*r_{b,i}}$|
|基准资产i权重($w_{b,i}$)|$Q_3=\displaystyle\sum_{i=1}^{n}{w_{b,i}*r_{p,i}}$|$Q_1=\displaystyle\sum_{i=1}^{n}{w_{b,i}*r_{b,i}}$|

此时，我们的基准组合收益由上图可以表示为 rb = Q1。根据此表，我们可以表示出Brinson模型对这四类收益的定义

1、资产配置收益（即我们RQBeta的板块配置）——由资产配置带来的超额收益

假设我们能够自主选择决定组合中资产配置的比例，但是在每一个资产类别内部则完全按照该资产类别的基准配置，那么该组合的收益率超过基准收益率的部分称为资产配置收益（Asset Allocation）。

RAA = Q2 - Q1

2、个股选择收益（即我们RQBeta的版块内选股）——由个股选择而带来的超额收益

假设我们完全按照基准的比例进行资产类别配置，但是在每一个资产类别内部则能够自主进行个股选择，那么该组合的收益率超过基准收益率的部分称为个股选择收益（Stock Selection）。

RSS = Q3 - Q1     

3、交互作用收益——由资产配置和个股选择的交互而带来的超额收益

资产组合的超额收益不仅来自资产配置收益和个股有选择收益，还有一部分是由于二者的交互作用所带来的收益，即所谓的交互作用（Interaction）。

RIN = Q4 - Q3 - Q2 + Q1         

4、总超额收益

RTotal = Q4 - Q1 

而后Damien Laker提出资产配置收益的定义可能会带来错误，故将之修改为：

$$
R_{AA}^{'} = R_{AA} - \sum_{i=1}^{n}{( w_{p,i}-w_{b,i} ) * r_{b}} = R_{AA}
$$

尽管新定义的加入了基准收益，但由于权重之和都为1，所以更改后的资产配置收益和原结果在总和上是相等的。

这两者的差异在于，原定义强调超额资产配置的收益来源于对收益更高的资产i的超配，或对收益低的资产j的低配；而新定义强调对表现优于基准总收益的类别i超配，或劣于基准总收益的类别j低配，这种更符合实际。

## 二、多期Brinson模型

当我们需要以月度、季度、年度来考评时，此时的每期之间的个资产i的权重常有改变，所以单期的Brinson模型需要被推广至多期，其主要思路与单期一致

此时t期的各权重与收益计算如下：

t期：基准行业i权重：$w_{t,b,i}$，组合资产i权重：$w_{t,p,i}$；基准行业i收益：$r_{t,b,i}$，组合资产i收益：$r_{t,p,i}$

基准组合t期收益：$r_{t,b} = \displaystyle\sum_{i=1}^{n}{w_{t,b,i}*r_{t,b,i}}$，资产组合t期收益：$r_{t,p}=\displaystyle\sum_{i=1}^{n}{w_{t,p,i}*r_{t,p,i}}$

资产组合的多期累积收益，与基准组合的多期累积收益的计算公式如下：

资产组合累计收益：$R_p=(1+r_{1,p})(1+r_{2,p})...(1+r_{t,p})-1$

基准组合累计收益：$R_p=(1+r_{1,b})(1+r_{2,b})...(1+r_{t,b})-1$

接下来的四类收益计算方法与定义与单期模型相同。

Brinson分析不仅可以适用于单独的策略收益分析，更可以拓广至更大的范围，例如基金经理，乃至公司。

我们以格雷厄姆策略为例，从 2015-01-01到 2017-10-01，初始股票资金 ¥100000 ( 每日交易数据 )，

这是RQBeta的Brinson分析截图，接下来我们便来示范如何得到这几个结果~

![](https://alicdn.ricequant.com/upload/fa/fb3ec7db8e3184b8682ac5c861ad17fa.png)
![](https://alicdn.ricequant.com/upload/1d/2686eb90227e13819e5c590e1eba341d.png)

```python
import pandas as pd
name = ['现金','能源','原材料','非必需消费品','必需消费品','医疗保健','金融','信息技术','电信服务','公共服务','工业']
w1 = [0.3406,0.0599,0.0173,0.0837,0.0000,0.0444,0.1678,0.0000,0.0000,0.0000,0.2863]
w2 = [0.0000,0.0279,0.0672,0.1136,0.0678,0.0443,0.4150,0.0776,0.0104,0.0000,0.1762]
r1 = [0.0000,0.6824,5.4289,0.6665,0.0000,5.8276,1.4278,0.0000,0.0000,0.0000,1.1677]
r2 = [0.0000,0.0132,0.0760,0.1019,0.2125,0.1364,0.0256,0.0681,0.0649,0.0000,-0.0033]

df = pd.DataFrame({'weight_portf_i': w1,
                   'weight_bench_i': w2,
                   'return_portf_i': r1,
                   'return_bench_i': r2},
                  index = name)
df
```

```python
df['Q1'] = df['return_bench_i']*df['weight_bench_i']
df['Q2'] = df['return_bench_i']*df['weight_portf_i']
df['Q3'] = df['return_portf_i']*df['weight_bench_i']
df['Q4'] = df['return_portf_i']*df['weight_portf_i']
df
```

```python
result = pd.DataFrame()
result['板块配置'] = df['Q2'] - df['Q1']-(df['weight_portf_i'] - df['weight_bench_i'])*sum(df['Q1'])
result['板块内选股'] = df['Q3'] - df['Q1']
result['交互收益'] = df['Q4'] - df['Q3'] - df['Q2'] + df['Q1']
result['总超额收益'] = df['Q4'] - df['Q1']
result.ix['合计'] = result.apply(lambda x:x.sum())
result
```